<html>
    <head>
        <script type="text/javascript" src="redirects.js"></script>
        <script type="text/javascript">
            // Adapted from https://github.com/rafgraph/spa-github-pages
            (function(l) {
                if (l.search[1] === '/' ) {
                    var decoded = l.search.slice(1).split('&').map(function(s) { 
                    return s.replace(/~and~/g, '&')
                    }).join('?');
                    window.history.replaceState(null, null,
                        l.pathname.slice(0, -1) + decoded + l.hash
                    );
                }

                for (let redirect of redirects) {
                    if (ciEquals(redirect.pathname, window.location.pathname)) {
                        window.location = redirect.target;
                        return;
                    }
                }

                window.location = "https://www.derekantrican.com";
            }(window.location))

            // Case-insensitive compare https://stackoverflow.com/a/2140723/2246411
            function ciEquals(a, b) {
                return typeof a === 'string' && typeof b === 'string'
                    ? a.localeCompare(b, undefined, { sensitivity: 'accent' }) === 0
                    : a === b;
            }
        </script>
    </head>
    <body>
        Hello World!
    </body>
</html>